# AB-Bot / Polymarket Scanner Configuration
# Copy this file to .env and fill in your values

# ===================
# Environment
# ===================
# Options: development | staging | production
ENVIRONMENT=development

# ===================
# Docker Configuration
# ===================
POSTGRES_USER=abbot
POSTGRES_PASSWORD=abbot_secret
POSTGRES_DB=ab_bot
POSTGRES_PORT=5432

# Redis is not exposed to host by default in docker-compose (network-isolated).
# If you need host access for debugging, use: docker compose exec redis redis-cli ...
REDIS_PORT=6379
REDIS_APP_PASSWORD=app_secret_change_me
REDIS_DYNAMIC_TUNER_PASSWORD=dynamic_tuner_secret_change_me
REDIS_DYNAMIC_SUBSCRIBER_PASSWORD=dynamic_subscriber_secret_change_me

# ===================
# Database (Required)
# ===================
# For Docker: postgres://abbot:abbot_secret@postgres:5432/ab_bot
# For local: postgres://user:password@localhost:5432/ab_bot
DATABASE_URL=postgres://abbot:abbot_secret@localhost:5432/ab_bot
DATABASE_MAX_CONNECTIONS=20

# ===================
# Redis (Required)
# ===================
# For Docker (ACL app user): redis://app:<password>@redis:6379
# For local (ACL app user): redis://app:<password>@127.0.0.1:6379
REDIS_URL=redis://app:app_secret_change_me@127.0.0.1:6379
# Dynamic tuner publish/read connection (sole writer for dynamic:config:update)
DYNAMIC_TUNER_REDIS_URL=redis://dynamic_tuner:dynamic_tuner_secret_change_me@127.0.0.1:6379
# Dynamic config subscriber connection (read-only pub/sub consumer)
DYNAMIC_CONFIG_REDIS_URL=redis://dynamic_subscriber:dynamic_subscriber_secret_change_me@127.0.0.1:6379

# ===================
# Polygon RPC (Required - choose one)
# ===================
# Option 1: Alchemy (recommended)
ALCHEMY_API_KEY=your_alchemy_api_key_here

# Option 2: Direct RPC URL
# POLYGON_RPC_URL=https://polygon-mainnet.g.alchemy.com/v2/your_key

# ===================
# Polymarket API (Optional - uses defaults)
# ===================
# POLYMARKET_CLOB_URL=https://clob.polymarket.com
# POLYMARKET_WS_URL=wss://ws-subscriptions-clob.polymarket.com/ws/market

# ===================
# Alerts (Optional)
# ===================
# Telegram
# TELEGRAM_BOT_TOKEN=your_bot_token
# TELEGRAM_CHAT_ID=your_chat_id

# Discord
# DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/...

# ===================
# API Server
# ===================
API_HOST=0.0.0.0
API_PORT=3000

# JWT_SECRET is REQUIRED and must be:
# - At least 32 characters long
# - A secure random value (not the default)
# Generate with: openssl rand -base64 32
JWT_SECRET=your-secure-random-secret-at-least-32-chars

CORS_PERMISSIVE=true
WS_CHANNEL_CAPACITY=1000

# ===================
# Arb Monitor
# ===================
POLLING_INTERVAL_MS=1000
MIN_ARB_PROFIT=0.01
MAX_POSITION_SIZE=1000
ARB_MIN_PROFIT_THRESHOLD=0.005
ARB_MONITOR_MAX_MARKETS=300
# stable | balanced | discovery
ARB_MONITOR_AGGRESSIVENESS=balanced
ARB_MONITOR_EXPLORATION_SLOTS=5
ARB_UPDATE_TIMEOUT_SECS=120

# ===================
# Copy Trading
# ===================
COPY_MIN_TRADE_VALUE=10
COPY_MAX_SLIPPAGE_PCT=0.01

# ===================
# Dynamic Tuner
# ===================
DYNAMIC_TUNER_ENABLED=true
DYNAMIC_TUNER_APPLY=true
DYNAMIC_TUNER_INTERVAL_SECS=300
DYNAMIC_TUNER_REGIME_STREAK=2
DYNAMIC_TUNER_FREEZE_DRAWDOWN=0.20
DYNAMIC_TUNER_EVAL_DELAY_MINUTES=10
DYNAMIC_TUNER_FILL_DEGRADE_DELTA=0.08
DYNAMIC_TUNER_PNL_DEGRADE_DELTA=75
DYNAMIC_CONFIG_ALLOWED_SOURCES=dynamic_tuner,dynamic_tuner_rollback,dynamic_tuner_sync

# ===================
# Monitoring (Optional)
# ===================
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin

# ===================
# Email (Optional - for password reset)
# ===================
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USERNAME=your-username
# SMTP_PASSWORD=your-password
# SMTP_FROM=noreply@yourdomain.com
# SMTP_FROM_NAME=Polymarket Scanner
# APP_URL=https://your-dashboard-url.com

# ===================
# Logging
# ===================
RUST_LOG=api_server=info,arb_monitor=info,bot_scanner=info,polymarket_core=info
