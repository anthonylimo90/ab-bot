name: Deploy

# Railway handles deployments automatically via GitHub integration.
# This workflow just runs CI checks and notifies on deployment.

on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  # Run CI checks before Railway deploys
  ci:
    name: CI Checks
    uses: ./.github/workflows/ci.yml

  # Notify that deployment will be handled by Railway
  notify:
    name: Deployment Status
    needs: ci
    runs-on: ubuntu-latest
    steps:
      - name: Deployment info
        run: |
          echo "=========================================="
          echo "CI Checks Passed - Railway Deploying"
          echo "=========================================="
          echo ""
          echo "Commit: ${{ github.sha }}"
          echo "Branch: ${{ github.ref_name }}"
          echo "Author: ${{ github.actor }}"
          echo ""
          echo "Railway will automatically deploy:"
          echo "  - api-server"
          echo "  - arb-monitor"
          echo "  - dashboard"
          echo ""
          echo "Monitor deployments at: https://railway.app/dashboard"
          echo "=========================================="
